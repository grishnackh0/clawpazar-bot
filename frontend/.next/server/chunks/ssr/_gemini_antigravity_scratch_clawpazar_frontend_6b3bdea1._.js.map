{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/taha/.gemini/antigravity/scratch/clawpazar/frontend/components/BottomNav.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { Home, Search, Zap, PawPrint, User } from 'lucide-react';\n\nconst tabs = [\n    { href: '/', icon: Home, label: 'Ana Sayfa' },\n    { href: '/kesfet', icon: Search, label: 'Keşfet' },\n    { href: '/sohbet', icon: PawPrint, label: 'Sat', isCenter: true },\n    { href: '/mezat', icon: Zap, label: 'Mezat' },\n    { href: '/profil', icon: User, label: 'Profil' },\n];\n\nexport function BottomNav() {\n    const pathname = usePathname();\n\n    return (\n        <nav className=\"fixed bottom-0 left-0 right-0 z-50 glass pb-safe\">\n            <div className=\"mx-auto flex max-w-lg items-center justify-around px-2 py-1.5\">\n                {tabs.map((tab) => {\n                    const isActive = tab.href === '/'\n                        ? pathname === '/'\n                        : pathname === tab.href || pathname?.startsWith(tab.href + '/');\n                    const Icon = tab.icon;\n\n                    if (tab.isCenter) {\n                        return (\n                            <Link\n                                key=\"center\"\n                                href={tab.href}\n                                className=\"flex -mt-6 h-[56px] w-[56px] items-center justify-center rounded-full neon-btn animate-neon-pulse transition-transform active:scale-90 vhs-glitch\"\n                            >\n                                <Icon className=\"w-6 h-6 text-white icon-neon\" strokeWidth={2.5} />\n                            </Link>\n                        );\n                    }\n\n                    return (\n                        <Link\n                            key={tab.href + tab.label}\n                            href={tab.href}\n                            className={`flex flex-col items-center gap-0.5 px-3 py-2 transition-all duration-200 group ${isActive\n                                ? 'text-[var(--neon-cyan)]'\n                                : 'text-[var(--color-text-muted)] hover:text-[var(--color-text-secondary)]'\n                                }`}\n                        >\n                            <Icon\n                                className={`w-5 h-5 transition-all ${isActive ? 'icon-neon' : 'group-hover:icon-neon'}`}\n                                strokeWidth={isActive ? 2.5 : 1.5}\n                            />\n                            <span className=\"text-[10px] font-medium tracking-wide\">{tab.label}</span>\n                            {isActive && (\n                                <div className=\"h-0.5 w-5 rounded-full bg-[var(--neon-cyan)] shadow-[0_0_8px_rgba(0,240,255,0.5)] mt-0.5\" />\n                            )}\n                        </Link>\n                    );\n                })}\n            </div>\n        </nav>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAJA;;;;;AAMA,MAAM,OAAO;IACT;QAAE,MAAM;QAAK,MAAM,0QAAI;QAAE,OAAO;IAAY;IAC5C;QAAE,MAAM;QAAW,MAAM,+QAAM;QAAE,OAAO;IAAS;IACjD;QAAE,MAAM;QAAW,MAAM,yRAAQ;QAAE,OAAO;QAAO,UAAU;IAAK;IAChE;QAAE,MAAM;QAAU,MAAM,sQAAG;QAAE,OAAO;IAAQ;IAC5C;QAAE,MAAM;QAAW,MAAM,yQAAI;QAAE,OAAO;IAAS;CAClD;AAEM,SAAS;IACZ,MAAM,WAAW,IAAA,gNAAW;IAE5B,qBACI,6SAAC;QAAI,WAAU;kBACX,cAAA,6SAAC;YAAI,WAAU;sBACV,KAAK,GAAG,CAAC,CAAC;gBACP,MAAM,WAAW,IAAI,IAAI,KAAK,MACxB,aAAa,MACb,aAAa,IAAI,IAAI,IAAI,UAAU,WAAW,IAAI,IAAI,GAAG;gBAC/D,MAAM,OAAO,IAAI,IAAI;gBAErB,IAAI,IAAI,QAAQ,EAAE;oBACd,qBACI,6SAAC,sOAAI;wBAED,MAAM,IAAI,IAAI;wBACd,WAAU;kCAEV,cAAA,6SAAC;4BAAK,WAAU;4BAA+B,aAAa;;;;;;uBAJxD;;;;;gBAOhB;gBAEA,qBACI,6SAAC,sOAAI;oBAED,MAAM,IAAI,IAAI;oBACd,WAAW,CAAC,+EAA+E,EAAE,WACvF,4BACA,2EACA;;sCAEN,6SAAC;4BACG,WAAW,CAAC,uBAAuB,EAAE,WAAW,cAAc,yBAAyB;4BACvF,aAAa,WAAW,MAAM;;;;;;sCAElC,6SAAC;4BAAK,WAAU;sCAAyC,IAAI,KAAK;;;;;;wBACjE,0BACG,6SAAC;4BAAI,WAAU;;;;;;;mBAbd,IAAI,IAAI,GAAG,IAAI,KAAK;;;;;YAiBrC;;;;;;;;;;;AAIhB","debugId":null}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file:///Users/taha/.gemini/antigravity/scratch/clawpazar/frontend/lib/api.ts"],"sourcesContent":["// ClawPazar – Typed API Client\n// Wraps all 25+ backend endpoints with auth token injection\n\nconst API_BASE = process.env.NEXT_PUBLIC_API_URL || '';\n\ntype Method = 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';\n\nasync function request<T>(method: Method, path: string, body?: object): Promise<T> {\n    const token = typeof window !== 'undefined'\n        ? localStorage.getItem('cp_token')\n        : null;\n\n    const res = await fetch(`${API_BASE}${path}`, {\n        method,\n        headers: {\n            'Content-Type': 'application/json',\n            ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        },\n        body: body ? JSON.stringify(body) : undefined,\n    });\n\n    if (!res.ok) {\n        const err = await res.json().catch(() => ({ error: res.statusText }));\n        throw new Error(err.error || `API Error: ${res.status}`);\n    }\n\n    return res.json();\n}\n\n// ============================================================\n// LISTINGS\n// ============================================================\n\nexport const listingsApi = {\n    browse: (params?: {\n        page?: number; limit?: number; category?: string;\n        search?: string; minPrice?: number; maxPrice?: number;\n        city?: string; sort?: string;\n    }) => {\n        const qs = new URLSearchParams();\n        if (params) {\n            Object.entries(params).forEach(([k, v]) => {\n                if (v !== undefined) qs.set(k, String(v));\n            });\n        }\n        return request<{\n            listings: Listing[]; total: number; page: number; limit: number;\n        }>('GET', `/api/listings?${qs}`);\n    },\n\n    get: (id: string) =>\n        request<Listing>('GET', `/api/listings/${id}`),\n\n    create: (message: string, images?: string[], channel = 'web') =>\n        request<{ taskId: string; status: string; message: string }>(\n            'POST', '/api/listings', { message, images, channel }\n        ),\n\n    update: (id: string, data: Partial<Listing>) =>\n        request<Listing>('PUT', `/api/listings/${id}`, data),\n\n    publish: (id: string) =>\n        request<Listing>('POST', `/api/listings/${id}/publish`),\n\n    delete: (id: string) =>\n        request<{ success: boolean }>('DELETE', `/api/listings/${id}`),\n\n    semanticSearch: (embedding: number[], limit = 10) =>\n        request<Listing[]>('POST', '/api/listings/search/semantic', { embedding, limit }),\n};\n\n// ============================================================\n// AUCTIONS\n// ============================================================\n\nexport const auctionsApi = {\n    list: () =>\n        request<Auction[]>('GET', '/api/auctions'),\n\n    create: (data: {\n        listingId: string; startingPrice: number;\n        reservePrice?: number; durationMinutes: number; minBidIncrement?: number;\n    }) =>\n        request<Auction>('POST', '/api/auctions', data),\n\n    bid: (auctionId: string, amount: number) =>\n        request<Bid>('POST', `/api/auctions/${auctionId}/bid`, { amount }),\n};\n\n// ============================================================\n// NEGOTIATIONS\n// ============================================================\n\nexport const negotiationsApi = {\n    start: (listingId: string, offerAmount: number) =>\n        request<Negotiation>('POST', '/api/negotiations', { listingId, offerAmount }),\n\n    counter: (id: string, amount: number) =>\n        request<Negotiation>('POST', `/api/negotiations/${id}/counter`, { amount }),\n\n    accept: (id: string) =>\n        request<Negotiation>('POST', `/api/negotiations/${id}/accept`),\n};\n\n// ============================================================\n// PAYMENTS\n// ============================================================\n\nexport const paymentsApi = {\n    initialize: (data: {\n        orderId: string; card: object;\n        buyer: object; shippingAddress: object; billingAddress: object;\n    }) =>\n        request<{ status: string; threeDSHtmlContent: string; paymentId: string }>(\n            'POST', '/api/payments/initialize', data\n        ),\n};\n\n// ============================================================\n// VENDORS\n// ============================================================\n\nexport const vendorsApi = {\n    register: (data: {\n        storeName: string; address: string; city: string;\n        district: string; identityNumber: string; iban: string;\n        subMerchantType?: string;\n    }) =>\n        request<{ vendor: object; iyzicoStatus: string }>(\n            'POST', '/api/vendors/register', data\n        ),\n};\n\n// ============================================================\n// COMPLIANCE\n// ============================================================\n\nexport const complianceApi = {\n    getDisclosure: () =>\n        request<{ title: string; content: string; version: string }>(\n            'GET', '/api/compliance/disclosure'\n        ),\n\n    recordConsent: (consentType: string, isGranted: boolean, version: string) =>\n        request<{ id: string }>('POST', '/api/compliance/consent', {\n            consentType, isGranted, consentTextVersion: version,\n        }),\n\n    getConsents: () =>\n        request<Record<string, boolean>>('GET', '/api/compliance/consents'),\n\n    requestDeletion: (reason: string) =>\n        request<{ requestId: string }>('POST', '/api/compliance/delete', { reason }),\n\n    exportData: () =>\n        request<object>('GET', '/api/compliance/export'),\n\n    reportTakedown: (data: {\n        listingId: string; reporterEmail: string;\n        reporterName: string; reason: string;\n    }) =>\n        request<{ requestId: string; deadline: string }>(\n            'POST', '/api/compliance/takedown', data\n        ),\n};\n\n// ============================================================\n// AGENTS\n// ============================================================\n\nexport const agentsApi = {\n    taskStatus: (taskId: string) =>\n        request<AgentTask>('GET', `/api/agents/tasks/${taskId}`),\n};\n\n// ============================================================\n// TYPES\n// ============================================================\n\nexport interface Listing {\n    id: string;\n    vendor_id: string;\n    title: string;\n    description: string;\n    price: number;\n    currency: string;\n    images: string[];\n    thumbnail_url: string;\n    category_id: string;\n    condition: string;\n    city: string;\n    status: string;\n    content_source: string;\n    requires_human_review: boolean;\n    view_count: number;\n    favorite_count: number;\n    created_at: string;\n    vendors?: { store_name: string; avg_rating: number; store_slug: string };\n    categories?: { name_tr: string; slug: string };\n}\n\nexport interface Auction {\n    id: string;\n    listing_id: string;\n    starting_price: number;\n    current_price: number;\n    reserve_price: number;\n    min_bid_increment: number;\n    bid_count: number;\n    highest_bidder_id: string;\n    status: string;\n    starts_at: string;\n    ends_at: string;\n    listings?: { title: string; thumbnail_url: string; price: number };\n}\n\nexport interface Bid {\n    id: string;\n    auction_id: string;\n    bidder_id: string;\n    amount: number;\n    is_winning: boolean;\n    created_at: string;\n}\n\nexport interface Negotiation {\n    id: string;\n    listing_id: string;\n    buyer_id: string;\n    seller_id: string;\n    initial_offer: number;\n    current_offer: number;\n    counter_offer: number | null;\n    agreed_price: number | null;\n    status: string;\n    round_count: number;\n}\n\nexport interface AgentTask {\n    id: string;\n    agentType: string;\n    taskType: string;\n    status: 'queued' | 'running' | 'completed' | 'failed';\n    result?: Record<string, unknown>;\n    error?: string;\n}\n"],"names":[],"mappings":"AAAA,+BAA+B;AAC/B,4DAA4D;;;;;;;;;;;;;;;;;AAE5D,MAAM,WAAW,6DAAmC;AAIpD,eAAe,QAAW,MAAc,EAAE,IAAY,EAAE,IAAa;IACjE,MAAM,QAAQ,sCACR,0BACA;IAEN,MAAM,MAAM,MAAM,MAAM,GAAG,WAAW,MAAM,EAAE;QAC1C;QACA,SAAS;YACL,gBAAgB;YAChB,GAAI,sCAAQ,0BAAuC,CAAC,CAAC;QACzD;QACA,MAAM,OAAO,KAAK,SAAS,CAAC,QAAQ;IACxC;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACT,MAAM,MAAM,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC;gBAAE,OAAO,IAAI,UAAU;YAAC,CAAC;QACnE,MAAM,IAAI,MAAM,IAAI,KAAK,IAAI,CAAC,WAAW,EAAE,IAAI,MAAM,EAAE;IAC3D;IAEA,OAAO,IAAI,IAAI;AACnB;AAMO,MAAM,cAAc;IACvB,QAAQ,CAAC;QAKL,MAAM,KAAK,IAAI;QACf,IAAI,QAAQ;YACR,OAAO,OAAO,CAAC,QAAQ,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE;gBAClC,IAAI,MAAM,WAAW,GAAG,GAAG,CAAC,GAAG,OAAO;YAC1C;QACJ;QACA,OAAO,QAEJ,OAAO,CAAC,cAAc,EAAE,IAAI;IACnC;IAEA,KAAK,CAAC,KACF,QAAiB,OAAO,CAAC,cAAc,EAAE,IAAI;IAEjD,QAAQ,CAAC,SAAiB,QAAmB,UAAU,KAAK,GACxD,QACI,QAAQ,iBAAiB;YAAE;YAAS;YAAQ;QAAQ;IAG5D,QAAQ,CAAC,IAAY,OACjB,QAAiB,OAAO,CAAC,cAAc,EAAE,IAAI,EAAE;IAEnD,SAAS,CAAC,KACN,QAAiB,QAAQ,CAAC,cAAc,EAAE,GAAG,QAAQ,CAAC;IAE1D,QAAQ,CAAC,KACL,QAA8B,UAAU,CAAC,cAAc,EAAE,IAAI;IAEjE,gBAAgB,CAAC,WAAqB,QAAQ,EAAE,GAC5C,QAAmB,QAAQ,iCAAiC;YAAE;YAAW;QAAM;AACvF;AAMO,MAAM,cAAc;IACvB,MAAM,IACF,QAAmB,OAAO;IAE9B,QAAQ,CAAC,OAIL,QAAiB,QAAQ,iBAAiB;IAE9C,KAAK,CAAC,WAAmB,SACrB,QAAa,QAAQ,CAAC,cAAc,EAAE,UAAU,IAAI,CAAC,EAAE;YAAE;QAAO;AACxE;AAMO,MAAM,kBAAkB;IAC3B,OAAO,CAAC,WAAmB,cACvB,QAAqB,QAAQ,qBAAqB;YAAE;YAAW;QAAY;IAE/E,SAAS,CAAC,IAAY,SAClB,QAAqB,QAAQ,CAAC,kBAAkB,EAAE,GAAG,QAAQ,CAAC,EAAE;YAAE;QAAO;IAE7E,QAAQ,CAAC,KACL,QAAqB,QAAQ,CAAC,kBAAkB,EAAE,GAAG,OAAO,CAAC;AACrE;AAMO,MAAM,cAAc;IACvB,YAAY,CAAC,OAIT,QACI,QAAQ,4BAA4B;AAEhD;AAMO,MAAM,aAAa;IACtB,UAAU,CAAC,OAKP,QACI,QAAQ,yBAAyB;AAE7C;AAMO,MAAM,gBAAgB;IACzB,eAAe,IACX,QACI,OAAO;IAGf,eAAe,CAAC,aAAqB,WAAoB,UACrD,QAAwB,QAAQ,2BAA2B;YACvD;YAAa;YAAW,oBAAoB;QAChD;IAEJ,aAAa,IACT,QAAiC,OAAO;IAE5C,iBAAiB,CAAC,SACd,QAA+B,QAAQ,0BAA0B;YAAE;QAAO;IAE9E,YAAY,IACR,QAAgB,OAAO;IAE3B,gBAAgB,CAAC,OAIb,QACI,QAAQ,4BAA4B;AAEhD;AAMO,MAAM,YAAY;IACrB,YAAY,CAAC,SACT,QAAmB,OAAO,CAAC,kBAAkB,EAAE,QAAQ;AAC/D","debugId":null}},
    {"offset": {"line": 230, "column": 0}, "map": {"version":3,"sources":["file:///Users/taha/.gemini/antigravity/scratch/clawpazar/frontend/lib/mock-data.ts"],"sourcesContent":["// ClawPazar – Shared Mock Data\n// Realistic Turkish listings and auctions for when backend is offline\n\nimport type { Listing, Auction } from './api';\n\n// ============================================================\n// MOCK LISTINGS\n// ============================================================\n\nexport const mockListings: Listing[] = [\n    {\n        id: 'mock-1',\n        vendor_id: 'v1',\n        title: 'iPhone 15 Pro Max 256GB — Doğal Titanyum',\n        description: 'Kutusunda, tüm aksesuarlar mevcut. AppleCare+ Ekim 2025\\'e kadar geçerli. Ekranda ve kasada çizik yok. Face ID, kamera, batarya %97 sağlık.',\n        price: 58000,\n        currency: 'TRY',\n        images: [],\n        thumbnail_url: '',\n        category_id: 'elektronik',\n        condition: 'like_new',\n        city: 'İstanbul',\n        status: 'active',\n        content_source: 'user',\n        requires_human_review: false,\n        view_count: 342,\n        favorite_count: 28,\n        created_at: new Date(Date.now() - 2 * 3600000).toISOString(),\n        vendors: { store_name: 'TechPazar', avg_rating: 4.8, store_slug: 'techpazar' },\n        categories: { name_tr: 'Elektronik', slug: 'elektronik' },\n    },\n    {\n        id: 'mock-2',\n        vendor_id: 'v2',\n        title: 'MacBook Air M3 15\" 16GB/512GB — Gece Yarısı',\n        description: '2024 model, kutu açılmamış sıfır ürün. Apple Türkiye garantili. Faturası mevcuttur.',\n        price: 45500,\n        currency: 'TRY',\n        images: [],\n        thumbnail_url: '',\n        category_id: 'elektronik',\n        condition: 'new',\n        city: 'Ankara',\n        status: 'active',\n        content_source: 'user',\n        requires_human_review: false,\n        view_count: 189,\n        favorite_count: 45,\n        created_at: new Date(Date.now() - 5 * 3600000).toISOString(),\n        vendors: { store_name: 'MacStore TR', avg_rating: 4.9, store_slug: 'macstore-tr' },\n        categories: { name_tr: 'Elektronik', slug: 'elektronik' },\n    },\n    {\n        id: 'mock-3',\n        vendor_id: 'v3',\n        title: 'PlayStation 5 Slim + 2 DualSense + 3 Oyun',\n        description: 'PS5 Slim dijital sürüm. Spider-Man 2, God of War Ragnarök, FC 25 dahil. 2 orijinal DualSense kol. Kutulu, faturalı.',\n        price: 19500,\n        currency: 'TRY',\n        images: [],\n        thumbnail_url: '',\n        category_id: 'elektronik',\n        condition: 'like_new',\n        city: 'İzmir',\n        status: 'active',\n        content_source: 'user',\n        requires_human_review: false,\n        view_count: 567,\n        favorite_count: 72,\n        created_at: new Date(Date.now() - 8 * 3600000).toISOString(),\n        categories: { name_tr: 'Elektronik', slug: 'elektronik' },\n    },\n    {\n        id: 'mock-4',\n        vendor_id: 'v4',\n        title: 'Nike Air Jordan 1 Retro High OG — Chicago',\n        description: 'Orijinal, StockX doğrulamalı. 42 numara. Hiç giyilmedi, sadece denendi. Kutu ve etiket mevcut.',\n        price: 8500,\n        currency: 'TRY',\n        images: [],\n        thumbnail_url: '',\n        category_id: 'moda',\n        condition: 'new',\n        city: 'İstanbul',\n        status: 'active',\n        content_source: 'user',\n        requires_human_review: false,\n        view_count: 234,\n        favorite_count: 56,\n        created_at: new Date(Date.now() - 12 * 3600000).toISOString(),\n        categories: { name_tr: 'Moda', slug: 'moda' },\n    },\n    {\n        id: 'mock-5',\n        vendor_id: 'v5',\n        title: 'Samsung Galaxy S24 Ultra 512GB — Titanium Gray',\n        description: 'Galaxy AI özellikleri aktif. S Pen dahil. Çizik yok, cam koruyucu ve kılıf ile kullanıldı. Batarya sağlığı mükemmel.',\n        price: 42000,\n        currency: 'TRY',\n        images: [],\n        thumbnail_url: '',\n        category_id: 'elektronik',\n        condition: 'like_new',\n        city: 'Bursa',\n        status: 'active',\n        content_source: 'user',\n        requires_human_review: false,\n        view_count: 156,\n        favorite_count: 19,\n        created_at: new Date(Date.now() - 24 * 3600000).toISOString(),\n        categories: { name_tr: 'Elektronik', slug: 'elektronik' },\n    },\n    {\n        id: 'mock-6',\n        vendor_id: 'v6',\n        title: 'iPad Pro M4 13\" 256GB WiFi + Apple Pencil Pro',\n        description: 'OLED ekran, M4 çip. Apple Pencil Pro dahil. Magic Keyboard ayrıca satılık. Çizim ve tasarım için ideal.',\n        price: 38900,\n        currency: 'TRY',\n        images: [],\n        thumbnail_url: '',\n        category_id: 'elektronik',\n        condition: 'like_new',\n        city: 'Antalya',\n        status: 'active',\n        content_source: 'user',\n        requires_human_review: false,\n        view_count: 98,\n        favorite_count: 15,\n        created_at: new Date(Date.now() - 36 * 3600000).toISOString(),\n        categories: { name_tr: 'Elektronik', slug: 'elektronik' },\n    },\n    {\n        id: 'mock-7',\n        vendor_id: 'v7',\n        title: 'Dyson V15 Detect Absolute — Lazer Süpürge',\n        description: 'Dyson V15 Detect, lazer toz algılama özellikli. Tüm başlıklar mevcut. 1 yıl kullanıldı, mükemmel durumda.',\n        price: 14500,\n        currency: 'TRY',\n        images: [],\n        thumbnail_url: '',\n        category_id: 'ev',\n        condition: 'used',\n        city: 'İstanbul',\n        status: 'active',\n        content_source: 'user',\n        requires_human_review: false,\n        view_count: 87,\n        favorite_count: 12,\n        created_at: new Date(Date.now() - 48 * 3600000).toISOString(),\n        categories: { name_tr: 'Ev & Yaşam', slug: 'ev' },\n    },\n    {\n        id: 'mock-8',\n        vendor_id: 'v8',\n        title: 'Adidas Yeezy Boost 350 V2 — Zebra',\n        description: 'Orijinal, 43 numara. 3-4 kez giyildi. Temiz durumda, kutu mevcut.',\n        price: 5200,\n        currency: 'TRY',\n        images: [],\n        thumbnail_url: '',\n        category_id: 'moda',\n        condition: 'used',\n        city: 'Ankara',\n        status: 'active',\n        content_source: 'user',\n        requires_human_review: false,\n        view_count: 145,\n        favorite_count: 33,\n        created_at: new Date(Date.now() - 72 * 3600000).toISOString(),\n        categories: { name_tr: 'Moda', slug: 'moda' },\n    },\n    {\n        id: 'mock-9',\n        vendor_id: 'v9',\n        title: 'Apple Watch Ultra 2 — Titanyum, 49mm',\n        description: 'Alpine Loop kordon + Ocean Band dahil. GPS + Cellular. Ekranda çizik yok, titanyum kasa mükemmel durumda.',\n        price: 22000,\n        currency: 'TRY',\n        images: [],\n        thumbnail_url: '',\n        category_id: 'aksesuar',\n        condition: 'like_new',\n        city: 'İstanbul',\n        status: 'active',\n        content_source: 'user',\n        requires_human_review: false,\n        view_count: 210,\n        favorite_count: 41,\n        created_at: new Date(Date.now() - 4 * 3600000).toISOString(),\n        categories: { name_tr: 'Aksesuar', slug: 'aksesuar' },\n    },\n    {\n        id: 'mock-10',\n        vendor_id: 'v10',\n        title: 'Sony WH-1000XM5 — Gürültü Engelleme Kulaklık',\n        description: 'Siyah renk, kutulu. ANC performansı harika. 30 saat pil ömrü. USB-C şarj. 6 ay kullanıldı.',\n        price: 6800,\n        currency: 'TRY',\n        images: [],\n        thumbnail_url: '',\n        category_id: 'elektronik',\n        condition: 'used',\n        city: 'Konya',\n        status: 'active',\n        content_source: 'user',\n        requires_human_review: false,\n        view_count: 178,\n        favorite_count: 22,\n        created_at: new Date(Date.now() - 96 * 3600000).toISOString(),\n        categories: { name_tr: 'Elektronik', slug: 'elektronik' },\n    },\n    {\n        id: 'mock-11',\n        vendor_id: 'v11',\n        title: 'Antika Osmanlı Kahve Fincanı Seti — 6lı',\n        description: 'El yapımı, altın yaldızlı. Koleksiyon değeri yüksek. 100+ yıllık orijinal parçalar. Sertifikalı.',\n        price: 12000,\n        currency: 'TRY',\n        images: [],\n        thumbnail_url: '',\n        category_id: 'koleksiyon',\n        condition: 'used',\n        city: 'Trabzon',\n        status: 'active',\n        content_source: 'user',\n        requires_human_review: false,\n        view_count: 67,\n        favorite_count: 18,\n        created_at: new Date(Date.now() - 120 * 3600000).toISOString(),\n        categories: { name_tr: 'Koleksiyon', slug: 'koleksiyon' },\n    },\n    {\n        id: 'mock-12',\n        vendor_id: 'v12',\n        title: 'DJI Mini 4 Pro Fly More Combo — Drone',\n        description: '4K/60fps HDR video, 48MP fotoğraf. 3 batarya, şarj hub, çanta dahil. 10 uçuş yapıldı. Garanti devam ediyor.',\n        price: 27500,\n        currency: 'TRY',\n        images: [],\n        thumbnail_url: '',\n        category_id: 'elektronik',\n        condition: 'like_new',\n        city: 'İstanbul',\n        status: 'active',\n        content_source: 'user',\n        requires_human_review: false,\n        view_count: 312,\n        favorite_count: 64,\n        created_at: new Date(Date.now() - 6 * 3600000).toISOString(),\n        categories: { name_tr: 'Elektronik', slug: 'elektronik' },\n    },\n];\n\n// ============================================================\n// MOCK AUCTIONS\n// ============================================================\n\nexport const mockAuctions: Auction[] = [\n    {\n        id: 'auction-1',\n        listing_id: 'mock-2',\n        starting_price: 35000,\n        current_price: 45200,\n        reserve_price: 42000,\n        min_bid_increment: 500,\n        bid_count: 12,\n        highest_bidder_id: 'u5',\n        status: 'active',\n        starts_at: new Date(Date.now() - 3600000).toISOString(),\n        ends_at: new Date(Date.now() + 2 * 3600000 + 14 * 60000).toISOString(),\n        listings: { title: 'MacBook Pro M3 14\"', thumbnail_url: '', price: 55000 },\n    },\n    {\n        id: 'auction-2',\n        listing_id: 'mock-11',\n        starting_price: 2000,\n        current_price: 3800,\n        reserve_price: 5000,\n        min_bid_increment: 200,\n        bid_count: 7,\n        highest_bidder_id: 'u3',\n        status: 'active',\n        starts_at: new Date(Date.now() - 7200000).toISOString(),\n        ends_at: new Date(Date.now() + 45 * 60000).toISOString(),\n        listings: { title: 'Antika Osmanlı Kahve Fincanı Seti', thumbnail_url: '', price: 12000 },\n    },\n    {\n        id: 'auction-3',\n        listing_id: 'mock-3',\n        starting_price: 500,\n        current_price: 1200,\n        reserve_price: 2000,\n        min_bid_increment: 100,\n        bid_count: 23,\n        highest_bidder_id: 'u8',\n        status: 'active',\n        starts_at: new Date(Date.now() - 10800000).toISOString(),\n        ends_at: new Date(Date.now() + 5 * 60000).toISOString(),\n        listings: { title: 'Koleksiyon Pokémon Kart Seti', thumbnail_url: '', price: 3000 },\n    },\n    {\n        id: 'auction-4',\n        listing_id: 'mock-9',\n        starting_price: 15000,\n        current_price: 19800,\n        reserve_price: 20000,\n        min_bid_increment: 500,\n        bid_count: 9,\n        highest_bidder_id: 'u2',\n        status: 'active',\n        starts_at: new Date(Date.now() - 1800000).toISOString(),\n        ends_at: new Date(Date.now() + 4 * 3600000).toISOString(),\n        listings: { title: 'Apple Watch Ultra 2 — Titanyum', thumbnail_url: '', price: 22000 },\n    },\n];\n\n// ============================================================\n// HELPERS\n// ============================================================\n\nexport function getMockListing(id: string): Listing | undefined {\n    return mockListings.find((l) => l.id === id);\n}\n\nexport function filterListings(opts: {\n    category?: string;\n    search?: string;\n}): Listing[] {\n    let results = [...mockListings];\n    if (opts.category && opts.category !== 'all') {\n        results = results.filter((l) => l.category_id === opts.category);\n    }\n    if (opts.search) {\n        const q = opts.search.toLowerCase();\n        results = results.filter((l) =>\n            l.title.toLowerCase().includes(q) ||\n            l.description.toLowerCase().includes(q) ||\n            l.city.toLowerCase().includes(q)\n        );\n    }\n    return results;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 624, "column": 0}, "map": {"version":3,"sources":["file:///Users/taha/.gemini/antigravity/scratch/clawpazar/frontend/lib/store.ts"],"sourcesContent":["// ClawPazar – Zustand State Management\n// Stores: auth, auction, chat, listings\n\nimport { create } from 'zustand';\nimport type { Listing, Auction, Bid, Negotiation, AgentTask } from './api';\n\n// ============================================================\n// 1. AUTH STORE\n// ============================================================\n\ninterface AuthState {\n    userId: string | null;\n    email: string | null;\n    displayName: string | null;\n    role: 'buyer' | 'seller' | 'admin' | null;\n    token: string | null;\n    isAuthenticated: boolean;\n    login: (token: string, user: { id: string; email: string; displayName: string; role: string }) => void;\n    logout: () => void;\n}\n\nexport const useAuth = create<AuthState>((set) => ({\n    userId: null,\n    email: null,\n    displayName: null,\n    role: null,\n    token: typeof window !== 'undefined' ? localStorage.getItem('cp_token') : null,\n    isAuthenticated: typeof window !== 'undefined' ? !!localStorage.getItem('cp_token') : false,\n\n    login: (token, user) => {\n        localStorage.setItem('cp_token', token);\n        set({\n            token,\n            userId: user.id,\n            email: user.email,\n            displayName: user.displayName,\n            role: user.role as AuthState['role'],\n            isAuthenticated: true,\n        });\n    },\n\n    logout: () => {\n        localStorage.removeItem('cp_token');\n        set({\n            token: null,\n            userId: null,\n            email: null,\n            displayName: null,\n            role: null,\n            isAuthenticated: false,\n        });\n    },\n}));\n\n// ============================================================\n// 2. AUCTION STORE (real-time via WebSocket)\n// ============================================================\n\ninterface AuctionState {\n    activeAuction: Auction | null;\n    bids: Bid[];\n    isConnected: boolean;\n    setAuction: (auction: Auction) => void;\n    addBid: (bid: Bid) => void;\n    updatePrice: (price: number, endsAt: string) => void;\n    setConnected: (connected: boolean) => void;\n    reset: () => void;\n}\n\nexport const useAuction = create<AuctionState>((set) => ({\n    activeAuction: null,\n    bids: [],\n    isConnected: false,\n\n    setAuction: (auction) => set({ activeAuction: auction }),\n\n    addBid: (bid) =>\n        set((state) => ({\n            bids: [bid, ...state.bids].slice(0, 50), // keep last 50\n        })),\n\n    updatePrice: (price, endsAt) =>\n        set((state) => ({\n            activeAuction: state.activeAuction\n                ? { ...state.activeAuction, current_price: price, ends_at: endsAt }\n                : null,\n        })),\n\n    setConnected: (connected) => set({ isConnected: connected }),\n\n    reset: () => set({ activeAuction: null, bids: [], isConnected: false }),\n}));\n\n// ============================================================\n// 3. CHAT STORE (agent conversation)\n// ============================================================\n\nexport interface ChatMessage {\n    id: string;\n    role: 'user' | 'agent';\n    content: string;\n    timestamp: Date;\n    type: 'text' | 'image' | 'voice' | 'task_card' | 'listing_preview';\n    metadata?: Record<string, unknown>;\n    agentStatus?: string;\n    isStreaming?: boolean;\n}\n\ninterface ChatState {\n    messages: ChatMessage[];\n    isAgentTyping: boolean;\n    agentStatus: string | null;\n    activeTask: AgentTask | null;\n    addMessage: (msg: ChatMessage) => void;\n    addAgentReply: (msg: ChatMessage) => void; // adds msg AND clears typing\n    deleteMessage: (id: string) => void;\n    setAgentTyping: (typing: boolean, status?: string) => void;\n    setActiveTask: (task: AgentTask | null) => void;\n    setInput: (text: string) => void;\n    clearChat: () => void;\n    getMessages: () => ChatMessage[];\n    streamAgentStart: (msg: ChatMessage) => void; // start streaming placeholder\n    updateLastAgentMessage: (content: string) => void; // update streaming content\n    finalizeStream: () => void; // mark streaming done\n}\n\nexport const useChat = create<ChatState>((set, get) => ({\n    messages: [],\n    isAgentTyping: false,\n    agentStatus: null,\n    activeTask: null,\n\n    // Add message WITHOUT touching typing state (for user messages)\n    addMessage: (msg) =>\n        set((state) => ({\n            messages: [...state.messages, msg],\n        })),\n\n    // Add agent reply AND clear typing indicator in one atomic update\n    addAgentReply: (msg) =>\n        set((state) => ({\n            messages: [...state.messages, msg],\n            isAgentTyping: false,\n            agentStatus: null,\n        })),\n\n    deleteMessage: (id) =>\n        set((state) => ({\n            messages: state.messages.filter((m) => m.id !== id),\n        })),\n\n    setAgentTyping: (typing, status) =>\n        set({ isAgentTyping: typing, agentStatus: status || null }),\n\n    setActiveTask: (task) => set({ activeTask: task }),\n\n    setInput: () => { },\n\n    // Getter for accessing messages outside React render (e.g. in async functions)\n    getMessages: () => get().messages,\n\n    // Start a streaming message placeholder\n    streamAgentStart: (msg) =>\n        set((state) => ({\n            messages: [...state.messages, { ...msg, isStreaming: true }],\n            isAgentTyping: false,\n            agentStatus: null,\n        })),\n\n    // Update the last agent message content (for streaming)\n    updateLastAgentMessage: (content) =>\n        set((state) => {\n            const msgs = [...state.messages];\n            for (let i = msgs.length - 1; i >= 0; i--) {\n                if (msgs[i].role === 'agent' && msgs[i].isStreaming) {\n                    msgs[i] = { ...msgs[i], content };\n                    break;\n                }\n            }\n            return { messages: msgs };\n        }),\n\n    // Mark streaming as complete\n    finalizeStream: () =>\n        set((state) => {\n            const msgs = state.messages.map((m) =>\n                m.isStreaming ? { ...m, isStreaming: false } : m\n            );\n            return { messages: msgs, isAgentTyping: false, agentStatus: null };\n        }),\n\n    clearChat: () => set({ messages: [], isAgentTyping: false, agentStatus: null, activeTask: null }),\n}));\n\n// ============================================================\n// 4. LISTINGS STORE\n// ============================================================\n\ninterface ListingsState {\n    listings: Listing[];\n    totalCount: number;\n    currentPage: number;\n    isLoading: boolean;\n    filters: {\n        category?: string;\n        search?: string;\n        minPrice?: number;\n        maxPrice?: number;\n        city?: string;\n        sort?: string;\n    };\n    setListings: (listings: Listing[], total: number) => void;\n    appendListings: (listings: Listing[]) => void;\n    setPage: (page: number) => void;\n    setFilters: (filters: Partial<ListingsState['filters']>) => void;\n    setLoading: (loading: boolean) => void;\n}\n\nexport const useListings = create<ListingsState>((set) => ({\n    listings: [],\n    totalCount: 0,\n    currentPage: 1,\n    isLoading: false,\n    filters: {},\n\n    setListings: (listings, total) => set({ listings, totalCount: total, currentPage: 1 }),\n\n    appendListings: (newListings) =>\n        set((state) => ({\n            listings: [...state.listings, ...newListings],\n            currentPage: state.currentPage + 1,\n        })),\n\n    setPage: (page) => set({ currentPage: page }),\n\n    setFilters: (filters) =>\n        set((state) => ({\n            filters: { ...state.filters, ...filters },\n            listings: [],\n            currentPage: 1,\n        })),\n\n    setLoading: (loading) => set({ isLoading: loading }),\n}));\n\n// ============================================================\n// HELPERS\n// ============================================================\n\n/** Format price as Turkish Lira */\nexport function formatPrice(amount: number): string {\n    return new Intl.NumberFormat('tr-TR', {\n        style: 'currency',\n        currency: 'TRY',\n        minimumFractionDigits: 0,\n        maximumFractionDigits: 0,\n    }).format(amount);\n}\n\n/** Format relative time in Turkish */\nexport function formatTimeAgo(date: string | Date): string {\n    const now = new Date();\n    const then = new Date(date);\n    const diffMs = now.getTime() - then.getTime();\n    const diffMin = Math.floor(diffMs / 60000);\n    const diffHour = Math.floor(diffMs / 3600000);\n    const diffDay = Math.floor(diffMs / 86400000);\n\n    if (diffMin < 1) return 'az önce';\n    if (diffMin < 60) return `${diffMin} dk önce`;\n    if (diffHour < 24) return `${diffHour} sa önce`;\n    if (diffDay < 7) return `${diffDay} gün önce`;\n    return then.toLocaleDateString('tr-TR', { day: 'numeric', month: 'short' });\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 845, "column": 0}, "map": {"version":3,"sources":["file:///Users/taha/.gemini/antigravity/scratch/clawpazar/frontend/app/mezat/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { motion } from 'framer-motion';\nimport { Zap, Flame, Clock, Gavel, Package, Loader2 } from 'lucide-react';\nimport { BottomNav } from '@/components/BottomNav';\nimport { auctionsApi, type Auction } from '@/lib/api';\nimport { mockAuctions } from '@/lib/mock-data';\nimport { formatPrice } from '@/lib/store';\n\nfunction useCountdown(endsAt: string) {\n    const [remaining, setRemaining] = useState('');\n    const [isUrgent, setIsUrgent] = useState(false);\n\n    useEffect(() => {\n        const update = () => {\n            const diff = new Date(endsAt).getTime() - Date.now();\n            if (diff <= 0) { setRemaining('BİTTİ'); return; }\n            const h = Math.floor(diff / 3600000);\n            const m = Math.floor((diff % 3600000) / 60000);\n            const s = Math.floor((diff % 60000) / 1000);\n            setIsUrgent(diff < 600000);\n            setRemaining(h > 0 ? `${h}s ${m}dk` : `${m}dk ${s}sn`);\n        };\n        update();\n        const timer = setInterval(update, 1000);\n        return () => clearInterval(timer);\n    }, [endsAt]);\n\n    return { remaining, isUrgent };\n}\n\nfunction AuctionCard({ auction }: { auction: Auction }) {\n    const { remaining, isUrgent } = useCountdown(auction.ends_at);\n\n    return (\n        <Link href={`/mezat/${auction.id}`}>\n            <div className={`neon-card p-4 ${isUrgent ? 'border-[var(--neon-pink)]/40 shadow-[0_0_20px_rgba(255,45,120,0.15)]' : ''} vhs-glitch`}>\n                <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-2 mb-2\">\n                            <div className=\"live-badge rounded-full px-2 py-0.5 text-[10px] font-bold font-retro inline-flex items-center gap-1\">\n                                <span className=\"w-1.5 h-1.5 rounded-full bg-[var(--neon-pink)] animate-live-dot\" />\n                                CANLI\n                            </div>\n                            {auction.bid_count > 10 && (\n                                <span className=\"text-[10px] text-[var(--neon-orange)] flex items-center gap-0.5\">\n                                    <Flame className=\"w-3 h-3 icon-neon\" /> Popüler\n                                </span>\n                            )}\n                            {isUrgent && (\n                                <span className=\"text-[10px] text-[var(--neon-pink)] flex items-center gap-0.5 animate-pulse font-retro\">\n                                    SON DAKİKA\n                                </span>\n                            )}\n                        </div>\n                        <h3 className=\"text-sm font-semibold text-[var(--color-text-primary)]\">\n                            {auction.listings?.title || 'Mezat Ürünü'}\n                        </h3>\n                        <div className=\"flex items-center gap-3 mt-2\">\n                            <span className=\"price price-lg\">\n                                {formatPrice(auction.current_price)}\n                            </span>\n                            <span className=\"text-[11px] text-[var(--color-text-muted)]\">\n                                {auction.bid_count} teklif\n                            </span>\n                        </div>\n                        <div className=\"text-[11px] text-[var(--color-text-muted)] mt-1\">\n                            Başlangıç: {formatPrice(auction.starting_price)}\n                        </div>\n                    </div>\n                    <div className=\"text-right\">\n                        <div className={`text-xs font-retro flex items-center gap-1 justify-end ${isUrgent ? 'text-[var(--neon-pink)] animate-pulse' : 'text-[var(--neon-cyan)]'}`}>\n                            <Clock className=\"w-3 h-3\" strokeWidth={2} />\n                            {remaining}\n                        </div>\n                        <motion.button\n                            className=\"mt-3 neon-btn-cyan rounded-full px-4 py-1.5 text-[11px] font-semibold text-white flex items-center gap-1\"\n                            whileTap={{ scale: 0.95 }}\n                        >\n                            <Gavel className=\"w-3 h-3\" strokeWidth={2} />\n                            Teklif Ver\n                        </motion.button>\n                    </div>\n                </div>\n            </div>\n        </Link>\n    );\n}\n\nexport default function MezatPage() {\n    const [auctions, setAuctions] = useState<Auction[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [isOffline, setIsOffline] = useState(false);\n\n    useEffect(() => {\n        auctionsApi.list()\n            .then((data) => {\n                setAuctions(data);\n                setIsOffline(false);\n            })\n            .catch(() => {\n                setAuctions(mockAuctions);\n                setIsOffline(true);\n            })\n            .finally(() => setLoading(false));\n    }, []);\n\n    return (\n        <div className=\"pb-24 min-h-dvh\">\n            <div className=\"px-5 pt-6 pb-4\">\n                <h1 className=\"text-xl font-bold flex items-center gap-2\">\n                    <Zap className=\"w-5 h-5 icon-pink icon-neon\" strokeWidth={2} />\n                    Canlı Mezatlar\n                </h1>\n                <p className=\"text-xs text-[var(--color-text-muted)] mt-1 font-retro flex items-center gap-1.5\">\n                    {loading ? <Loader2 className=\"w-3 h-3 animate-spin\" /> : `${auctions.length} AKTİF MEZAT`}\n                    {isOffline && (\n                        <span className=\"text-[var(--neon-orange)] text-[10px] ml-1\">OFFLINE</span>\n                    )}\n                </p>\n            </div>\n\n            {loading && (\n                <div className=\"flex justify-center py-12\">\n                    <Loader2 className=\"w-6 h-6 animate-spin text-[var(--neon-pink)]\" />\n                </div>\n            )}\n\n            {!loading && auctions.length > 0 && (\n                <motion.div\n                    className=\"px-5 space-y-3\"\n                    initial=\"hidden\"\n                    animate=\"show\"\n                    variants={{ show: { transition: { staggerChildren: 0.1 } } }}\n                >\n                    {auctions.map((auction) => (\n                        <motion.div\n                            key={auction.id}\n                            variants={{ hidden: { opacity: 0, y: 16 }, show: { opacity: 1, y: 0 } }}\n                        >\n                            <AuctionCard auction={auction} />\n                        </motion.div>\n                    ))}\n                </motion.div>\n            )}\n\n            {!loading && auctions.length === 0 && (\n                <motion.div className=\"text-center py-16 px-5\" initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }}>\n                    <div className=\"inline-flex h-16 w-16 items-center justify-center rounded-full bg-[var(--neon-pink)]/10 border border-[var(--neon-pink)]/20 mb-4\">\n                        <Package className=\"w-7 h-7 text-[var(--color-text-muted)] icon-neon\" strokeWidth={1} />\n                    </div>\n                    <p className=\"text-sm text-[var(--color-text-muted)]\">Şu an aktif mezat yok</p>\n                </motion.div>\n            )}\n\n            <BottomNav />\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}